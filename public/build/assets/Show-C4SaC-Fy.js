import{d as a,o as n,a as t,f as u,t as f,u as m,e as p,c as y,w as i,b as r,P as b,i as x,j as $,C as N,r as S,m as U,F as B,g as Z,W as M}from"./app-yCF23A8R.js";import{u as F,a as R,_ as W}from"./AppLayout-CP3Zf9uu.js";import{C as I}from"./Container-BsksLz-8.js";import{_ as Y}from"./Pagination-RsQVEcu3.js";import{r as T}from"./date-BdbsFQSu.js";import{_}from"./InputLabel-C8UxSOEW.js";import{_ as P}from"./PrimaryButton-ClcLombB.js";import{_ as q}from"./InputError-DvgyKHvP.js";import{_ as G}from"./SecondaryButton-CT0yq9r7.js";import{M as J}from"./MarkdownEditor-BFaFJbek.js";import{P as K}from"./PageHeading-DxNbWjy1.js";import{_ as O,r as Q}from"./Pill-B5dcesU1.js";import X from"./SideBaar-D-HzGOg8.js";import{S as A}from"./sweetalert2.esm.all-B0Dix5B2.js";import"./ConfirmationModal-DGDR7M25.js";import"./Modal-CWhIZec3.js";import"./GradientLink-Cwf__2XC.js";import"./ApplicationLogo-BtaTpQd1.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Card-DCaB_-GJ.js";function V(e,d){return n(),a("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{d:"M18.905 12.75a1.25 1.25 0 1 1-2.5 0v-7.5a1.25 1.25 0 0 1 2.5 0v7.5ZM8.905 17v1.3c0 .268-.14.526-.395.607A2 2 0 0 1 5.905 17c0-.995.182-1.948.514-2.826.204-.54-.166-1.174-.744-1.174h-2.52c-1.243 0-2.261-1.01-2.146-2.247.193-2.08.651-4.082 1.341-5.974C2.752 3.678 3.833 3 5.005 3h3.192a3 3 0 0 1 1.341.317l2.734 1.366A3 3 0 0 0 13.613 5h1.292v7h-.963c-.685 0-1.258.482-1.612 1.068a4.01 4.01 0 0 1-2.166 1.73c-.432.143-.853.386-1.011.814-.16.432-.248.9-.248 1.388Z"})])}function D(e,d){return n(),a("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{d:"M1 8.25a1.25 1.25 0 1 1 2.5 0v7.5a1.25 1.25 0 1 1-2.5 0v-7.5ZM11 3V1.7c0-.268.14-.526.395-.607A2 2 0 0 1 14 3c0 .995-.182 1.948-.514 2.826-.204.54.166 1.174.744 1.174h2.52c1.243 0 2.261 1.01 2.146 2.247a23.864 23.864 0 0 1-1.341 5.974C17.153 16.323 16.072 17 14.9 17h-3.192a3 3 0 0 1-1.341-.317l-2.734-1.366A3 3 0 0 0 6.292 15H5V8h.963c.685 0 1.258-.483 1.612-1.068a4.011 4.011 0 0 1 2.166-1.73c.432-.143.853-.386 1.011-.814.16-.432.248-.9.248-1.388Z"})])}const ee={class:"sm:flex"},te={class:"mb-4 flex-shrink-0 sm:mb-0 sm:mr-4"},se=["src"],oe={class:"flex-1"},ne=["innerHTML"],le={class:"block pt-1 text-xs text-slate-300 first-letter:uppercase"},re={class:"text-rose-500"},me={class:"mt-2 flex justify-end space-x-3 empty:hidden"},ie={key:0},ae={__name:"Comment",props:["comment"],emits:["edit","delete"],setup(e,{emit:d}){return(h,o)=>{var k,c;return n(),a("div",ee,[t("div",te,[t("img",{src:e.comment.user.profile_photo_url,class:"h-10 w-10 rounded-full"},null,8,se)]),t("div",oe,[t("div",{class:"prose prose-sm mt-1 max-w-none text-slate-400",innerHTML:e.comment.html},null,8,ne),t("span",le,[u("By "+f(e.comment.user.name)+" "+f(m(T)(e.comment.created_at))+" | ",1),t("span",re,f(e.comment.likes_count)+" likes",1)]),t("div",me,[h.$page.props.auth.user?(n(),a("div",ie,[e.comment.can.like?(n(),y(m(b),{key:0,"preserve-scroll":"",href:h.route("likes.store",["comment",e.comment.id]),method:"post",class:"inline-block text-slate-200 hover:text-rose-500 transition-colors"},{default:i(()=>[r(m(D),{class:"size-4 inline-block mr-1"}),o[2]||(o[2]=t("span",{class:"sr-only"},"Like Comment",-1))]),_:1},8,["href"])):(n(),y(m(b),{key:1,"preserve-scroll":"",href:h.route("likes.destroy",["comment",e.comment.id]),method:"delete",class:"inline-block text-slate-200 hover:text-rose-500 transition-colors"},{default:i(()=>[r(m(V),{class:"size-4 inline-block mr-1"}),o[3]||(o[3]=t("span",{class:"sr-only"},"Unlike Comment",-1))]),_:1},8,["href"]))])):p("",!0),(k=e.comment.can)!=null&&k.update?(n(),a("form",{key:1,onSubmit:o[0]||(o[0]=x(g=>h.$emit("edit",e.comment.id),["prevent"]))},o[4]||(o[4]=[t("button",{class:"font-mono text-xs hover:font-semibold"}," Edit ",-1)]),32)):p("",!0),(c=e.comment.can)!=null&&c.delete?(n(),a("form",{key:2,onSubmit:o[1]||(o[1]=x(g=>h.$emit("delete",e.comment.id),["prevent"]))},o[5]||(o[5]=[t("button",{class:"font-mono text-xs text-red-700 hover:font-semibold"}," Delete ",-1)]),32)):p("",!0)])])])}}},de=["href"],ce={class:"grid grid-cols-1 md:grid-cols-4 gap-8"},ue={class:"md:col-span-3"},fe=["src","alt"],pe={class:"block mt-1 text-sm text-slate-300"},ve=["innerHTML"],he={class:"mt-4 flex justify-between items-center"},ye={key:0,class:"mt-2"},ke={class:"text-rose-500 font-bold"},be={class:"mt-12"},xe={class:"divide-y divide-slate-500 mt-4"},ge={class:"md:col-span-1"},we={class:"mb-8 flex justify-between"},We={__name:"Show",props:["post","comments","recentPosts"],setup(e){const d=e,h=$(()=>T(d.post.created_at)),o=N({body:""}),k=S(null),c=S(null),g=$(()=>d.comments.data.find(l=>l.id===c.value)),E=l=>{var s,v;c.value=l,o.body=(s=g.value)==null?void 0:s.body,(v=k.value)==null||v.focus()},w=()=>{c.value=null,o.reset()},L=()=>o.post(route("posts.comments.store",d.post.id),{preserveScroll:!0,onSuccess:()=>o.reset()}),{confirmation:C}=F(),j=async()=>{var l;if(!await C("Are you sure you want to update this comment?")){(l=k.value)==null||l.focus();return}o.put(route("comments.update",{comment:c.value,page:d.comments.meta.current_page}),{preserveScroll:!0,onSuccess:w})},H=async l=>{await C("Are you sure you want to delete this comment?")&&M.delete(route("comments.destroy",{comment:l,page:d.comments.data.length>1?d.comments.meta.current_page:Math.max(d.comments.meta.current_page-1,1)}),{preserveScroll:!0})},z=l=>{A.fire({title:"Are you sure?",text:`Do you want to delete the post "${l.title}"?`,icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel",reverseButtons:!0}).then(s=>{s.isConfirmed?M.delete(route("posts.destroy",l),{preserveScroll:!0}):A.fire("Cancelled","The topic was not deleted.","info")})};return(l,s)=>(n(),a(B,null,[r(m(U),null,{default:i(()=>[t("link",{rel:"canonical",href:e.post.routes.show},null,8,de)]),_:1}),r(W,{title:e.post.title},{default:i(()=>[r(I,null,{default:i(()=>[t("div",ce,[t("div",ue,[e.post.image?(n(),a("img",{key:0,src:e.post.image?`/${e.post.image}`:"",alt:e.post.title,class:"w-full max-h-80 object-cover rounded-3xl shadow-md mb-8"},null,8,fe)):p("",!0),r(O,{href:l.route("posts.index",{topic:e.post.topic.slug})},{default:i(()=>[u(f(e.post.topic.name),1)]),_:1},8,["href"]),r(K,{class:"mt-2 flex justify-between"},{default:i(()=>[u(f(e.post.title),1)]),_:1}),t("span",pe,f(h.value)+" by "+f(e.post.user.name),1),t("article",{class:"mt-6 prose prose-sm max-w-none text-slate-100",innerHTML:e.post.html},null,8,ve),t("div",he,[l.$page.props.auth.user?(n(),a("div",ye,[e.post.can.like?(n(),y(m(b),{key:0,href:l.route("likes.store",["post",e.post.id]),method:"post",class:"inline-block bg-rose-600 hover:bg-rose-500 transition-colors text-white py-1.5 px-3 rounded-full"},{default:i(()=>[r(m(D),{class:"size-4 inline-block mr-1"}),s[3]||(s[3]=u(" Like Post "))]),_:1},8,["href"])):(n(),y(m(b),{key:1,href:l.route("likes.destroy",["post",e.post.id]),method:"delete",class:"inline-block bg-rose-600 hover:bg-rose-500 transition-colors text-white py-1.5 px-3 rounded-full"},{default:i(()=>[r(m(V),{class:"size-4 inline-block mr-1"}),s[4]||(s[4]=u(" Unlike Post "))]),_:1},8,["href"]))])):p("",!0),t("div",ke,[u(f(e.post.likes_count)+" ",1),r(m(Q),{class:"w-4 h-4 inline-block"})])]),t("div",be,[s[7]||(s[7]=t("h2",{class:"text-xl font-semibold"},"Comments",-1)),l.$page.props.auth.user?(n(),a("form",{key:0,onSubmit:s[1]||(s[1]=x(()=>c.value?j():L(),["prevent"])),class:"mt-4"},[t("div",null,[r(_,{for:"body",class:"sr-only"},{default:i(()=>s[5]||(s[5]=[u("Comment")])),_:1}),r(J,{ref_key:"commentTextAreaRef",ref:k,id:"body",modelValue:m(o).body,"onUpdate:modelValue":s[0]||(s[0]=v=>m(o).body=v),placeholder:"Speak your mind Spockâ€¦",editorClass:"!min-h-[100px]"},null,8,["modelValue"]),r(q,{message:m(o).errors.body,class:"mt-1"},null,8,["message"])]),r(P,{type:"submit",class:"mt-3",disabled:m(o).processing,textContent:f(c.value?"Update Comment":"Add Comment")},null,8,["disabled","textContent"]),c.value?(n(),y(G,{key:0,onClick:w,class:"ml-2"},{default:i(()=>s[6]||(s[6]=[u("Cancel ")])),_:1})):p("",!0)],32)):p("",!0),t("ul",xe,[(n(!0),a(B,null,Z(e.comments.data,v=>(n(),a("li",{key:v.id,class:"px-2 py-4"},[r(ae,{onEdit:E,onDelete:H,comment:v},null,8,["comment"])]))),128))]),r(Y,{meta:e.comments.meta,only:["comments"]},null,8,["meta"])])]),t("div",ge,[t("div",we,[e.post.can.update?(n(),y(R,{key:0,href:l.route("posts.edit",e.post.id)},{default:i(()=>s[8]||(s[8]=[u(" Edit Post ")])),_:1},8,["href"])):p("",!0),e.post.can.delete?(n(),y(P,{key:1,method:"delete",as:"button",type:"button",onClick:s[2]||(s[2]=x(v=>z(e.post),["prevent"]))},{default:i(()=>s[9]||(s[9]=[u(" Delete Post ")])),_:1})):p("",!0)]),r(X,{recentPosts:e.recentPosts},null,8,["recentPosts"])])])]),_:1})]),_:1},8,["title"])],64))}};export{We as default};
